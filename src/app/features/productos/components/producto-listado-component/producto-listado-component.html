<app-header-component></app-header-component>

<div style="margin-top: 80px">
  <h3>Productos</h3>
  <hr />
</div>

<!-- Formulario de busqueda -->

<form [formGroup]="frmBusqueda">
  <div class="row align-items-end mb-2">
    <div class="col-md-3">
      <label class="form-label">Buscar</label>
      <input type="text" formControlName="nombre" id="nombre" class="form-control" />
    </div>
    <div class="col-md-9 d-flex align-items-center mt-md-0 mt-2">
      <button
        type="button"
        class="btn btn-secondary me-2 mr-2"
        title="Buscar producto"
        (click)="buscar()"
      >
        <i class="bi bi-search"></i> Buscar
      </button>
      <button
        type="button"
        class="btn btn-primary"
        title="Registrar nuevo producto"
        (click)="nuevo()"
      >
        <i class="bi bi-file-earmark-plus"></i> Nuevo
      </button>
    </div>
  </div>
</form>

<!-- Tabla de solicitudes -->

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Id</th>
      <th>Nombre</th>
      <th>Descripci√≥n</th>
      <th>Categoria</th>
      <th>Precio</th>
      <th>Stock</th>
      <th>Img</th>
      <th style="width: 280px">Acciones</th>
    </tr>
  </thead>

  <tbody>
    @for (item of productosListaPaginados; track item.id) {
    <tr>
      <td>{{ item.id }}</td>
      <td>{{ item.nombre }}</td>
      <td>{{ item.descripcion }}</td>
      <td>{{ item.categoria }}</td>
      <td>{{ item.precio }}</td>
      <td>{{ item.stock }}</td>
      <td>
        @if (item.imagenUrl){
        <img src="{{imagenUrl}}/{{ item.imagenUrl }}" width="90" alt="Logo" />
        }

      </td>
      <td>
        <button type="button" class="btn btn-info mr-2" (click)="modificar(item)">
          <i class="bi bi-pencil"></i>
          Modificar
        </button>
        <button type="button" class="btn btn-warning mr-2" (click)="confirmarEliminar(item)">
          <i class="bi bi-trash"></i>
          Eliminar
        </button>
      </td>
    </tr>
    }
  </tbody>
</table>

<div class="row">
  <div class="col-xs-12 col-12">
    <pagination
      [totalItems]="totalItems"
      [(ngModel)]="currentPage"
      (pageChanged)="pageChanged($event)"
    ></pagination>
  </div>
</div>
